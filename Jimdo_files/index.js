!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){!function(a){function d(a,b){b=b||{},this._id=d._generateUUID(),this._promise=b.promise||Promise,this._frameId=b.frameId||"CrossStorageClient-"+this._id,this._origin=d._getOrigin(a),this._requests={},this._connected=!1,this._closed=!1,this._count=0,this._timeout=b.timeout||5e3,this._listener=null,this._installListener();var c;b.frameId&&(c=document.getElementById(b.frameId)),c&&this._poll(),c=c||this._createFrame(a),this._hub=c.contentWindow}d.frameStyle={display:"none",position:"absolute",top:"-999px",left:"-999px"},d._getOrigin=function(a){var b,c,d;return b=document.createElement("a"),b.href=a,b.host||(b=window.location),c=b.protocol&&":"!==b.protocol?b.protocol:window.location.protocol,d=c+"//"+b.host,d=d.replace(/:80$|:443$/,"")},d._generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:3&b|8).toString(16)})},d.prototype.onConnect=function(){var a=this;return this._connected?this._promise.resolve():this._closed?this._promise.reject(new Error("CrossStorageClient has closed")):(this._requests.connect||(this._requests.connect=[]),new this._promise(function(b,c){var d=setTimeout(function(){c(new Error("CrossStorageClient could not connect"))},a._timeout);a._requests.connect.push(function(a){if(clearTimeout(d),a)return c(a);b()})}))},d.prototype.set=function(a,b){return this._request("set",{key:a,value:b})},d.prototype.get=function(a){var b=Array.prototype.slice.call(arguments);return this._request("get",{keys:b})},d.prototype.del=function(){var a=Array.prototype.slice.call(arguments);return this._request("del",{keys:a})},d.prototype.clear=function(){return this._request("clear")},d.prototype.getKeys=function(){return this._request("getKeys")},d.prototype.close=function(){var a=document.getElementById(this._frameId);a&&a.parentNode.removeChild(a),window.removeEventListener?window.removeEventListener("message",this._listener,!1):window.detachEvent("onmessage",this._listener),this._connected=!1,this._closed=!0},d.prototype._installListener=function(){var a=this;this._listener=function(b){var c,d,e;if(!a._closed&&b.data&&"string"==typeof b.data&&("null"===b.origin?"file://":b.origin)===a._origin)if("cross-storage:unavailable"!==b.data){if(b.data.indexOf("cross-storage:")!==-1&&!a._connected){if(a._connected=!0,!a._requests.connect)return;for(c=0;c<a._requests.connect.length;c++)a._requests.connect[c](d);delete a._requests.connect}if("cross-storage:ready"!==b.data){try{e=JSON.parse(b.data)}catch(a){return}e.id&&a._requests[e.id]&&a._requests[e.id](e.error,e.result)}}else{if(a._closed||a.close(),!a._requests.connect)return;for(d=new Error("Closing client. Could not access localStorage in hub."),c=0;c<a._requests.connect.length;c++)a._requests.connect[c](d)}},window.addEventListener?window.addEventListener("message",this._listener,!1):window.attachEvent("onmessage",this._listener)},d.prototype._poll=function(){var a,b,c;a=this,c="file://"===a._origin?"*":a._origin,b=setInterval(function(){if(a._connected)return clearInterval(b);a._hub&&a._hub.postMessage("cross-storage:poll",c)},1e3)},d.prototype._createFrame=function(a){var b,c;b=window.document.createElement("iframe"),b.id=this._frameId;for(c in d.frameStyle)d.frameStyle.hasOwnProperty(c)&&(b.style[c]=d.frameStyle[c]);return window.document.body.appendChild(b),b.src=a,b},d.prototype._request=function(a,b){var c,d;return this._closed?this._promise.reject(new Error("CrossStorageClient has closed")):(d=this,d._count++,c={id:this._id+":"+d._count,method:"cross-storage:"+a,params:b},new this._promise(function(a,b){var e,f,g;e=setTimeout(function(){d._requests[c.id]&&(delete d._requests[c.id],b(new Error("Timeout: could not perform "+c.method)))},d._timeout),d._requests[c.id]=function(f,g){if(clearTimeout(e),delete d._requests[c.id],f)return b(new Error(f));a(g)},Array.prototype.toJSON&&(f=Array.prototype.toJSON,Array.prototype.toJSON=null),g="file://"===d._origin?"*":d._origin,d._hub.postMessage(JSON.stringify(c),g),f&&(Array.prototype.toJSON=f)}))},void 0!==b&&b.exports?b.exports=d:void 0!==c?c.CrossStorageClient=d:"function"==typeof define&&define.amd?define([],function(){return d}):a.CrossStorageClient=d}(this)},{}],2:[function(a,b,c){!function(a){var d={};d.init=function(a){var b=!0;try{window.localStorage||(b=!1)}catch(a){b=!1}if(!b)try{return window.parent.postMessage("cross-storage:unavailable","*")}catch(a){return}d._permissions=a||[],d._installListener(),window.parent.postMessage("cross-storage:ready","*")},d._installListener=function(){var a=d._listener;window.addEventListener?window.addEventListener("message",a,!1):window.attachEvent("onmessage",a)},d._listener=function(a){var b,c,e,f,g,h,i;if(b="null"===a.origin?"file://":a.origin,"cross-storage:poll"===a.data)return window.parent.postMessage("cross-storage:ready",a.origin);if("cross-storage:ready"!==a.data){try{e=JSON.parse(a.data)}catch(a){return}if(e&&"string"==typeof e.method&&(f=e.method.split("cross-storage:")[1])){if(d._permitted(b,f))try{h=d["_"+f](e.params)}catch(a){g=a.message}else g="Invalid permissions for "+f;i=JSON.stringify({id:e.id,error:g,result:h}),c="file://"===b?"*":b,window.parent.postMessage(i,c)}}},d._permitted=function(a,b){var c,e,f;if(c=["get","set","del","clear","getKeys"],!d._inArray(b,c))return!1;for(e=0;e<d._permissions.length;e++)if(f=d._permissions[e],f.origin instanceof RegExp&&f.allow instanceof Array&&f.origin.test(a)&&d._inArray(b,f.allow))return!0;return!1},d._set=function(a){window.localStorage.setItem(a.key,a.value)},d._get=function(a){var b,c,d,e;for(b=window.localStorage,c=[],d=0;d<a.keys.length;d++){try{e=b.getItem(a.keys[d])}catch(a){e=null}c.push(e)}return c.length>1?c:c[0]},d._del=function(a){for(var b=0;b<a.keys.length;b++)window.localStorage.removeItem(a.keys[b])},d._clear=function(){window.localStorage.clear()},d._getKeys=function(a){var b,c,d;for(d=[],c=window.localStorage.length,b=0;b<c;b++)d.push(window.localStorage.key(b));return d},d._inArray=function(a,b){for(var c=0;c<b.length;c++)if(a===b[c])return!0;return!1},d._now=function(){return"function"==typeof Date.now?Date.now():(new Date).getTime()},void 0!==b&&b.exports?b.exports=d:void 0!==c?c.CrossStorageHub=d:"function"==typeof define&&define.amd?define([],function(){return d}):a.CrossStorageHub=d}(this)},{}],3:[function(a,b,c){b.exports={CrossStorageClient:a("./client.js"),CrossStorageHub:a("./hub.js")}},{"./client.js":1,"./hub.js":2}],4:[function(a,b,c){a("cross-storage").CrossStorageHub.init([{origin:/.*/,allow:["get","set","del"]}])},{"cross-storage":3}]},{},[4]);