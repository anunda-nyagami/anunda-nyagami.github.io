!function(e){var o={};function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=o,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(n,t){if(1&t&&(n=r(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var o in n)r.d(e,o,function(t){return n[t]}.bind(null,o));return e},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return{}.hasOwnProperty.call(t,n)},r.p="/",r(r.s=12)}([function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.mockable=n.assign=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n.noop=function(){},n.hasOwnProp=c,n.on=function(t,n,e){t.addEventListener(n,e,!1)},n.off=function(t,n,e){t.removeEventListener(n,e)},n.bodyAppendChild=function n(e,o,r){o=void 0===o?50:o,r=void 0===r?1.5:r;try{(document.body||document.getElementsByTagName("body")[0]).appendChild(e)}catch(t){setTimeout(function(){n(e,o*r,r)},o)}},n.parseQS=function(t){return t.split("&").reduce(function(t,n){var e=n.split("=");return 1<e.length&&(n=e.shift(),t[decodeURIComponent(n)]=decodeURIComponent(e.join("="))),t},{})},n.dumpQS=a,n.randomBytes=u,n.uniqueId=function(){var t=(n=Date.now())/1e3|0,n=n-1e3*t;return u(4)+(0,r.packUInt32)(t)+(0,i.default)()+(0,r.packUInt16)(n)},n.timeOfId=function(t){return 1e3*(0,r.unpackUInt32)(t.substr(4,4))+(0,r.unpackUInt16)(t.substr(12,2))},n.isFin=s,n.isInt=function(t){return Number.isInteger?Number.isInteger(t):s(t)&&Math.floor(t)===t},n.tryFn=function(t){try{for(var n=arguments.length,e=Array(1<n?n-1:0),o=1;o<n;o++)e[o-1]=arguments[o];return t.apply(void 0,e)}catch(t){}},n.err=function(t,n){return(t=new Error(t)).name=n||"Error",t};var r=e(1),i=(e=e(5))&&e.__esModule?e:{default:e};function c(t,n){return{}.hasOwnProperty.call(t,n)}function a(o){return Object.keys(o).reduce(function(t,n){var e=o[n];return null!=e&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e)),t},[]).join("&")}function u(n){var t,e=window.crypto,o="",r=void 0,i=void 0;try{r=new Uint8Array(n),e.getRandomValues(r)}catch(t){for(r=[],i=0;i<n;++i)r.push(256*Math.random()|0)}for(i=0,t=r.length;i<t;++i)o+=String.fromCharCode(r[i]);return o}function s(t){return Number.isFinite?Number.isFinite(t):"number"==typeof t&&isFinite(t)}n.assign=Object.assign||function(t,n){for(var e in n)c(n,e)&&(t[e]=n[e]);return t},n.mockable={sendBeacon:function(t,n){"object"===("undefined"==typeof n?"undefined":o(n))&&(n=a(n)),function t(n,e,o){var r=document.createElement("img");return r.width=r.height=1,r.onerror=function(){setTimeout(function(){t(n,e,++o)},100*o),r.onload=r.onerror=null},r.onload=function(){r.onload=r.onload=null},r.src=n+"?"+e,r.setAttribute("loading","eager"),r}(t,n,1)},getLocation:function(){return window.location}}},function(t,n,e){"use strict";function o(t,n){if((t=""+t).length!==n)throw new Error("Invalid binary str");return t}Object.defineProperty(n,"__esModule",{value:!0}),n.bin2hex=function(t){for(var n="",e=0,o=t.length;e<o;++e){var r=t.charCodeAt(e);n+=(r<16?"0":"")+r.toString(16)}return n},n.packUInt8=function(t){return String.fromCharCode(255&t)},n.unpackUInt8=function(t){return o(t,1).charCodeAt(0)},n.packUInt16=function(t){return String.fromCharCode((65280&t)>>>8,255&t)},n.unpackUInt16=function(t){return(t=o(t,2)).charCodeAt(0)<<8|t.charCodeAt(1)},n.packUInt24=function(t){return String.fromCharCode((16711680&t)>>>16,(65280&t)>>>8,255&t)},n.unpackUInt24=function(t){return(t=o(t,3)).charCodeAt(0)<<16|t.charCodeAt(1)<<8|t.charCodeAt(2)},n.packUInt32=function(t){return String.fromCharCode(t>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t)},n.unpackInt32=function(t){return(t=o(t,4)).charCodeAt(0)<<24|t.charCodeAt(1)<<16|t.charCodeAt(2)<<8|t.charCodeAt(3)},n.unpackUInt32=function(t){var n=(t=o(t,4)).charCodeAt(0),e=128&n,t=(127&n)<<24|t.charCodeAt(1)<<16|t.charCodeAt(2)<<8|t.charCodeAt(3);return e&&(t+=2147483648),t}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Hash32=function(t){var n=this,o=0;t=t||"",n.update=function(t){for(var n=0,e=(t=""+t).length;n<e;++n)o=(o<<5)-o+t.charCodeAt(n);o|=0},n.bytes=function(){return(0,r.packUInt32)(o)},n.hex=function(){return(0,r.bin2hex)(n.bytes())},n.update(t)},n.Hash24=function(t){var n=this,o=0;t=t||"",n.update=function(t){for(var n=0,e=(t=""+t).length;n<e;++n)o=(o<<4)-o+t.charCodeAt(n);o&=16777215},n.bytes=function(){return(0,r.packUInt24)(o)},n.hex=function(){return(0,r.bin2hex)(n.bytes())},n.update(t)},n.Hash16=function(t){var n=this,o=0;t=t||"",n.update=function(t){for(var n=0,e=(t=""+t).length;n<e;++n)o=(o<<3)-o+t.charCodeAt(n);o&=65535},n.bytes=function(){return(0,r.packUInt16)(o)},n.hex=function(){return(0,r.bin2hex)(n.bytes())},n.update(t)};var r=e(1)},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ERROR=n.WARN=n.INFO=n.DEBUG=void 0,n.ConsoleLogger=function(t,n){function i(t){for(var n=arguments.length,e=Array(1<n?n-1:0),o=1;o<n;o++)e[o-1]=arguments[o];if(u.indexOf(t)>c)try{var r=void 0;console[t]?(r=console[t],e=[i.prefix].concat(e)):console.log&&(r=console.log,e=["["+t+"]",i.prefix].concat(e)),r&&function(){}.bind.call(r,console).apply(void 0,function(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}(e))}catch(t){}}var c=u.indexOf(n);return i.prefix=t,i.toString=function(){return'ConsoleLogger("'+i.prefix+'", "'+n+'")'},i},n.HttpLogger=function(i,t){function n(t){for(var n,e=arguments.length,o=Array(1<e?e-1:0),r=1;r<e;r++)o[r-1]=arguments[r];u.indexOf(t)>c&&(o.forEach(function(t,n){o[n]=s(t)}),n=t,t=o.join("\n\n"),a.mockable.sendBeacon(i,{prio:n,msg:s(t)}))}var c=u.indexOf(t);return n.toString=function(){return'HttpLogger("'+i+'", "'+t+'")'},n},n.Timer=function(t){var e=this,n={};e.logger=t,e.start=function(t){n[t]=Date.now()},e.end=function(t){e.log(t,Date.now()-n[t])},e.log=function(t,n){e.logger(o,"[TIMING]",t,n+"ms")}};var a=e(0),o=n.DEBUG="debug",u=(n.INFO="info",n.WARN="warn",n.ERROR="error",[o,"info","warn","error"]);function s(t){var n=""+t,e=void 0;return t instanceof Error?e=t:t.error instanceof Error&&(e=t.error),e&&e.stack&&(n+="\nStack: "+e.stack),n}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.encodeBase64Url=function(t){return window.btoa?window.btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""):function(t){var n,e=0,o=0,r="";for(t=""+t;t.charAt(0|o);r+=c.charAt(63&e>>8-o%1*8)){if(o+=.75,255<(n=t.charCodeAt(o)))throw new Error("String contains invalid char");e=e<<8|n}return r}(t)},n.decodeBase64Url=function(t){return window.atob?window.atob(t.replace(/-/g,"+").replace(/_/g,"/")):function(t){var n,e=0,o=0,r=0,i="";for(t=""+t;r<t.length;++r){if(-1===(n=c.indexOf(t.charAt(r))))throw new Error("String contains invalid char");e++%4?(o=64*o+n,i+=String.fromCharCode(255&o>>(-2*e&6))):o=n}return i}(t)};var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){if(r)return r;function t(t,n){try{e.update(t[n])}catch(t){e.update(t.message)}}var e=new o.Hash32,n=window.navigator||{};return t(n,"cpuClass"),e.update("\t"),t(n,"oscpu"),t(n,"hardwareConcurrency"),e.update("\t"),t(n,"deviceMemory"),e.update("\t"),t(screen,"colorDepth"),e.update("\t"),t(n,"maxTouchPoints"),t(n,"msMaxTouchPoints"),t(n,"appCodeName"),t(n,"appName"),t(n,"appVersion"),t(n,"buildID"),t(n,"userAgent"),t(n,"product"),t(n,"productSub"),t(n,"vendor"),t(n,"vendorSub"),t(n,"platform"),e.update(n.javaEnabled?n.javaEnabled():""),t(n,"cookieEnabled"),t(n,"language"),t(n,"languages"),t(n,"doNotTrack"),(n=new Date).setMonth(7),e.update(n.getTimezoneOffset()),n.setMonth(1),e.update(n.getTimezoneOffset()),r=e.bytes()};var o=e(2),r=void 0},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e(3),r="https://t.dcmn.io".replace(/\/*$/,""),e="https://sdk.dcmn.io".replace(/\/*$/,"");n.default={buildId:"klkv7626",trackingUrl:r,sdkUrl:e,dcmnLogger:new o.HttpLogger(r+"/log",o.INFO),customLogger:new o.ConsoleLogger("[_dcmn]",o.INFO)}},function(t,n,e){"use strict";function r(t){this.type=t}function o(t,n){var e=this;r.call(e,t),e.error=n,e.toString=function(){return"ErrorEvent["+e.type+"]: "+e.error}}Object.defineProperty(n,"__esModule",{value:!0}),n.Event=r,n.ErrorEvent=o,n.EventDispatcher=function(e){var o={};e=void 0===e?this:e,this.on=function(t,n){t in o?-1===o[t].indexOf(n)&&o[t].push(n):o[t]=[n]},this.off=function(t,n){var e;t in o&&0<=(e=o[t].indexOf(n))&&o[t].splice(e,1)},this.fire=function(n){"string"==typeof n&&(n=new r(n)),n.target=e;var t=n.type;t in o&&o[t].slice().forEach(function(t){try{t(n)}catch(t){}})}},o.prototype=Object.create(r.prototype)},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.GeoLocation=function(o,r){this.detect=function(e){o.get(r,h.noop,function(t){k(t)&&e(t)}),function(){try{if(!navigator.geolocation||!navigator.permissions)return;var t=function t(n){"granted"===(n.state||n.status)?(navigator.geolocation.getCurrentPosition(function(t){t=c((t=t.coords).latitude,t.longitude,t.accuracy),o.set(r,t),e(t)},h.noop,{enableHighAccuracy:!1,timeout:1/0,maximumAge:864e5}),n.onchange=h.noop):n.onchange=function(){t(n)}};navigator.permissions.query({name:"geolocation"}).then(t)}catch(t){}}()}},n.distance=b,n.accuracy=w,n.geohashValid=k,n.geohashLatErr=I,n.geohashLngErr=E,n.geohashEncode=c,n.geohashDecode=function(t){if(!k(t))throw new Error("Invalid geohash");for(var n,e,o,r=t.length,i=-v,c=v,a=-y,u=y,s=1,f=0,l=void 0;f<r;++f)for(e=m.indexOf(t.charAt(f)),l=4;0<=l;--l)o=e>>l&1,s?(n=(a+u)/2,o?a=n:u=n):(n=(i+c)/2,o?i=n:c=n),s=!s;var d=(i+c)/2,g=(a+u)/2,h=1<r?r-1:r;return{latitude:d,longitude:g,accuracy:w(d,g,d+I(h),g+E(h))}};var h=e(0),a=Math.PI,o=Math.floor,r=Math.ceil,u=Math.sin,s=Math.cos,f=Math.sqrt,l=Math.atan2,m="0123456789bcdefghjkmnpqrstuvwxyz",p=11,v=90,y=180,d=6371e3,i=Math.pow;function b(t,n){return n/w(t,0,t+1,0)}function w(t,n,e,o){var r=t*(c=a/y),i=e*c,t=(e-t)*c,c=(o-n)*c,c=u(t/2)*u(t/2)+s(r)*s(i)*u(c/2)*u(c/2),c=2*l(f(c),f(1-c));return d*c}function k(t){return"string"==typeof t&&/^[0-9b-hjkmnp-z]{1,11}$/.test(t)}function I(t){return v*i(.5,o(2.5*t))}function E(t){return y*i(.5,r(2.5*t))}function c(t,n,e){if(!(0,h.isFin)(t)||!(0,h.isFin)(n)||t<-v||v<t||n<-y||y<n)throw new Error("Invalid geo coordinates");if(!(0,h.isFin)(e)||e<0)throw new Error("Invalid accuracy");for(var o=b(t,e),r=1;r<=p&&!(o>=E(r));++r);r=p<r?p:r;for(var i,c=0,a=0,u=1,s="",f=-v,l=v,d=-y,g=y;s.length<r;)u?(i=(d+g)/2)<=n?(c=2*c+1,d=i):(c*=2,g=i):(i=(f+l)/2)<=t?(c=2*c+1,f=i):(c*=2,l=i),u=!u,5==++a&&(s+=m.charAt(c),a=c=0);return s}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SimpleStorage=function(r){r=r===m?1/0:r;var i=this,c=null;i.getTtl=function(){return r},i.setTtl=function(t){r=t},i.clear=function(t,n){(c=null,h.tryFn)(n)},i.all=function(t,n){(0,h.tryFn)(n,c?v(c):{})},i.get=function(n,t,e){i.all(t,function(t){(0,h.tryFn)(e,(0,h.hasOwnProp)(t,n)?t[n]:null)})},i.set=function(n,e,t,o){i.all(t,function(t){null===e?delete t[n]:t[n]=e,c=p(t,r),(0,h.tryFn)(o)})}},n.LocalStorage=function(n,e){try{i.call(this,window.localStorage||window.globalStorage,n,e)}catch(t){i.call(this,m,n,e)}},n.SessionStorage=function(n,e){try{i.call(this,window.sessionStorage,n,e)}catch(t){i.call(this,m,n,e)}},n.CookieStorage=function(a,c,u,s){c=c===m?1/0:c,s=s||"/";var f=this,n=new RegExp("(?:^|;)\\s*"+a+"\\s*=\\s*([^;\\s]+)","g"),l=!1===navigator.cookieEnabled?(0,h.err)("Cookie disabled","UnsupportedError"):m;function d(){if(l)throw l;n.lastIndex=0;var t=n.exec(document.cookie);return t?t[1]:null}function g(t,n){if(l)throw l;var e=h.mockable.getLocation(),o=a+"="+t+";path="+s+";expires="+n.toUTCString();if("http:"===e.protocol?o+=";SameSite=Lax":o+=";SameSite=None;Secure",u&&(o+=";domain="+u),document.cookie=o,!u)for(var r=e.hostname.split("."),i=r.length,c=i-2;0<=c;--c)try{document.cookie=o+";domain="+r.slice(c,i).join(".")}catch(t){}}f.getTtl=function(){return c},f.setTtl=function(t){c=t},f.clear=function(n,t){try{g("",new Date(0)),(0,h.tryFn)(t)}catch(t){(0,h.tryFn)(n,t)}},f.all=function(n,t){try{var e=d();(0,h.tryFn)(t,e?v(e):{})}catch(t){(0,h.tryFn)(n,t)}},f.get=function(n,t,e){f.all(t,function(t){(0,h.tryFn)(e,(0,h.hasOwnProp)(t,n)?t[n]:null)})},f.set=function(e,o,r,i){f.all(r,function(t){try{null===o?delete t[e]:t[e]=o;var n=p(t,c);if(g(n,new Date(Date.now()+1e3*(c===1/0?31536e3:c))),d()!==n)throw(0,h.err)("Write validation failed");(0,h.tryFn)(i)}catch(t){(0,h.tryFn)(r,t)}})}},n.ProxyPersistentStorage=function(r){var o=this,i="PersistentStorage";o.clear=function(n,t){r.call(i+".clear",[],function(t){(0,h.tryFn)(n,t)},function(){(0,h.tryFn)(t)})},o.all=function(n,e){r.call(i+".all",[],function(t){(0,h.tryFn)(n,t)},function(t){try{t=(0,h.parseQS)(t)}catch(t){return void(0,h.tryFn)(n,t)}(0,h.tryFn)(e,t)})},o.get=function(n,t,e){o.all(t,function(t){e((0,h.hasOwnProp)(t,n)?t[n]:null)})},o.set=function(t,n,e,o){r.call(i+".set",[t,n],function(t){(0,h.tryFn)(e,t)},function(){(0,h.tryFn)(o)})}},n.MultiStorage=function(s,n){n=n===m?1/0:n;var t=this;if(!s.length)throw(0,h.err)("No storage");t.getTtl=function(){return n},t.setTtl=function(t){n=t,s.forEach(function(t){t.setTtl(n)})},t.clear=function(n,t){function e(t){--r,i||(i=1,(0,h.tryFn)(n,t))}function o(){--r,!i&&r<=0&&(i=1,(0,h.tryFn)(t))}var r=s.length,i=0;s.forEach(function(t){t.clear(e,o)})},t.all=function(t,n){function e(){--i,!c&&i<=0&&(c=1,u.length===s.length?(0,h.tryFn)(t,u[0]):(0,h.tryFn)(n,a))}function o(t){u.push(t),e()}function r(t){(0,h.assign)(a,t),e()}var i=s.length,c=0,a={},u=[];s.forEach(function(t){t.all(o,r)})},t.get=function(n,e,o){function r(t){--c,!a&&c<=0&&(a=1,u!==m?(0,h.tryFn)(o,u):(0,h.tryFn)(e,t))}function i(t){--c,u=t,!a&&(null!==t||c<=0)&&(a=1,(0,h.tryFn)(o,t))}var c=s.length,a=0,u=void 0;s.forEach(function(t){t.get(n,r,i)})},t.set=function(n,e,t,o){function r(){--c,!a&&c<=0&&(a=1,(0,h.tryFn)(t,(0,h.err)("All storages errored")))}function i(){--c,a||(a=1,(0,h.tryFn)(o))}var c=s.length,a=0;s.forEach(function(t){t.set(n,e,r,i)})}},n.ItemTtlStorage=function(r,i){i=i===m?1/0:i;var o=this;o.getTtl=function(){return i},o.setTtl=function(t){i=t},o.clear=r.clear,o.all=function(n,t){r.all(n,function(e){try{var o=Date.now()/1e3;Object.keys(e).forEach(function(t){var n=e[t];(0,c.unpackUInt32)(n.substr(0,4))<o?(delete e[t],r.set(t,null)):e[t]=n.substr(4)}),(0,h.tryFn)(t,e)}catch(t){(0,h.tryFn)(n,t)}})},o.get=function(n,t,e){o.all(t,function(t){(0,h.tryFn)(e,(0,h.hasOwnProp)(t,n)?t[n]:null)})},o.set=function(t,n,e,o){null!==n&&(n=""+(0,c.packUInt32)(Math.ceil(Date.now()/1e3)+i)+n),r.set(t,n,e,o)}};var o=e(4),r=e(2),h=e(0),c=e(1),m=void 0;function p(t,n){return t.exp=n!==m&&n!==1/0?Math.ceil(Date.now()/1e3+n).toString(36):m,t=(0,o.encodeBase64Url)((0,h.dumpQS)(t)),(0,o.encodeBase64Url)(new r.Hash24(t).bytes())+t}function v(t){var n=(0,o.decodeBase64Url)(t.substr(0,4));if(t=t.substr(4),new r.Hash24(t).bytes()!==n)throw(0,h.err)("CRC mismatch");return(t=(0,h.parseQS)((0,o.decodeBase64Url)(t))).exp&&(1e3*parseInt(t.exp,36)<Date.now()?t={}:delete t.exp),t}function i(c,a,u){u=u===m?1/0:u;var s=this,f=c?m:(0,h.err)((this.constructor.name||"Storage")+" not supported","UnsupportedError");s.getTtl=function(){return u},s.setTtl=function(t){u=t},s.clear=function(n,t){try{c.removeItem(a),(0,h.tryFn)(t)}catch(t){(0,h.tryFn)(n,f||t)}},s.all=function(n,t){try{var e=c.getItem(a);(0,h.tryFn)(t,e?v(e):{})}catch(t){(0,h.tryFn)(n,f||t)}},s.get=function(n,t,e){s.all(t,function(t){(0,h.tryFn)(e,(0,h.hasOwnProp)(t,n)?t[n]:null)})},s.set=function(e,o,r,i){s.all(r,function(t){try{null===o?delete t[e]:t[e]=o;var n=p(t,u);if(c.setItem(a,n),c.getItem(a)!==n)throw(0,h.err)("Write validation failed");(0,h.tryFn)(i)}catch(t){(0,h.tryFn)(r,f||t)}})}}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n.default=function(t,n,e){var s=this,o=new h.EventDispatcher(s),r=t.dcmnLogger,i=0,c=new F({trackingUrl:t.trackingUrl,logger:t.customLogger});"object"!==("undefined"==typeof n?"undefined":d(n))?c.trackingId=n:c.assign(n),c.trackingId||T("Missing trackingId"),e&&c.assign(e);var f=function(t){r("UnsupportedError"===t.name?y.INFO:y.ERROR,t)};function a(n,e){var o={},r="/v1/jssdk/"+n;o.tid=e.trackingId,o.cid=e.cookieId?(0,m.encodeBase64Url)(e.cookieId):I,o.sto=e.sessionTimeout,o.fp=(0,m.encodeBase64Url)((0,p.default)()),o.ccid=e.customCookieId,o.cdid=e.customDeviceId,o.cuid=e.customUserId;var i,t=S.width*(E.devicePixelRatio||1),c=S.height*(E.devicePixelRatio||1);o.res=c<t?t+"x"+c:c+"x"+t,o.geo=e.geoHash,o.cgeo=e.customGeoHash;try{var a=C.connection.type;a&&["unknown","none"].indexOf(a)<0&&(o.cct=a)}catch(t){}function u(){var t="id="+(0,m.encodeBase64Url)((0,v.uniqueId)())+"&"+(0,v.dumpQS)(o);t+="&h="+(0,m.encodeBase64Url)(new g.Hash24(t).bytes()),v.mockable.sendBeacon(e.trackingUrl+r,t),s.log(y.INFO,"track "+n,o)}o.tzo=(new Date).getTimezoneOffset().toString(36),o.loc=v.mockable.getLocation().href.replace(/#.*/,""),o.ref=document.referrer||I,o.ceid=e.customEventId,o.rev=e.revenue,o.cur=e.currency,o.custom=e.custom,"preview"!==C.loadPurpose?e.rateLimit?(i=new g.Hash24([e.trackingId,n,o.loc,o.ref,o.cid,o.ccid,o.cdid,o.cuid,o.fp,o.ceid,o.rev,o.cur,o.custom].join(",")).hex(),l.get(i,function(t){u(),f(t)},function(t){t?s.log(y.INFO,"track "+n+" discarded by rate limit",o):(u(),l.setTtl(e.rateLimit),l.set(i,"1",f))})):u():s.log(y.WARN,"Abort track "+n+" (preview mode)",o)}s.get=function(t,e){var n=t;"function"==typeof t&&(e=t,n=I);var o,t=n?c.get(n):(0,v.assign)({},c);return e&&(o=function(t,n){try{e(t,n)}catch(t){}},(n?[n]:Object.keys(c)).forEach(function(t){c.events.on(t,function(){o(c[t],t)}),o(c[t],t)})),t},s.set=function(t,n){c.set(t,n)},s.trackPageView=function(t){var n=new x(c);n.assign(t||{}),a("pv",n)},s.trackCustomEvent=function(t,n){var e=new A(c);e.customEventId=t,e.assign(n||{}),a("ce",e)},s.ready=function(t){function n(){try{t(s)}catch(t){s.log(y.ERROR,t)}}i?n():o.on("ready",n)},s.log=function(t){for(var n=arguments.length,e=Array(1<n?n-1:0),o=1;o<n;o++)e[o-1]=arguments[o];c.logger.apply(c,[t].concat(e))},n=[new k.CookieStorage(O,1/0,c.cookieDomain,c.cookiePath),new k.LocalStorage(O),new k.SessionStorage(O)],c.crossDomainTracking&&((e=new w.default({connectionTimeout:c.createTimeout,commandTimeout:c.createTimeout})).connectIframe(t.sdkUrl+"/proxy."+t.buildId+".html"),e.on("connectionError",function(t){r("TimeoutError"===t.error.name?y.WARN:y.ERROR,t)}),n.push(new k.ProxyPersistentStorage(e)));var u=new k.MultiStorage(n),n=new k.MultiStorage([new k.CookieStorage(_,U,c.cookieDomain,c.cookiePath),new k.LocalStorage(_,U),new k.SessionStorage(_,U)],U),l=new k.ItemTtlStorage(new k.SimpleStorage,c.rateLimit);new b.GeoLocation(n,"geo").detect(function(t){c._geoHash=t,s.log(y.DEBUG,"Geo Coordinates",c.geoCoordinates)}),u.get("cid",function(t){i=1,o.fire("ready"),f(t)},function(t){try{var n=void 0;t?n=(0,m.decodeBase64Url)(t):(n=(0,v.uniqueId)(),t=(0,m.encodeBase64Url)(n)),s.log(y.DEBUG,"Cookie ID:",t,new Date((0,v.timeOfId)(n))),c._cookieId=n,u.set("cid",t,f)}catch(t){f(t)}i=1,o.fire("ready")})};var g=e(2),h=e(7),m=e(4),p=o(e(5)),v=e(0),y=e(3),b=e(8),w=o(e(11)),k=e(9);function o(t){return t&&t.__esModule?t:{default:t}}var I=void 0,E=window,C=E.navigator||{},S=E.screen||{},O="_dcmn_p",_="_dcmn_s",U=3600;function T(t){throw(0,v.err)(t)}function c(t){return("number"===("undefined"==typeof t?"undefined":d(t))||t instanceof String||t instanceof Number)&&(t=""+t),t===I||null===t||""===t?t=I:"string"==typeof t&&/^[0-9a-z_.-]+$/i.test(t)||T("Invalid custom id"),t}function a(t,n,e){e.configurable===I&&(e.configurable=!1),e.enumerable===I&&(e.enumerable=!0),e.get!==I&&e.set===I&&(e.set=function(){T(n+" is read only")}),Object.defineProperty(t,n,e)}function F(t){var e=this,o=(0,v.assign)({logger:I,createTimeout:1e3,trackingUrl:I,trackingId:I,rateLimit:1,cookieId:I,sessionTimeout:1800,geoCoordinates:I,geoHash:I,cookieDomain:I,cookiePath:"/",crossDomainTracking:!0,customCookieId:I,customDeviceId:I,customUserId:I,customGeoCoordinates:I,customGeoHash:I},t),r=new h.EventDispatcher(e);function i(t,n,e){o[t]!==n&&(o[t]=n,r.fire(t),(e||[]).forEach(function(t){r.fire(t)}))}a(e,"events",{enumerable:!1,value:r}),a(e,"has",{enumerable:!1,value:function(t){return{}.propertyIsEnumerable.call(e,t)}}),a(e,"set",{enumerable:!1,value:function(t,n){e.has(t)||T("Unknown field "+t),e[t]=n}}),a(e,"_write",{enumerable:!1,value:i}),a(e,"_read",{enumerable:!1,value:function(t){return o[t]}}),a(e,"get",{enumerable:!1,value:function(t){return e.has(t)||T("Unknown field "+t),e[t]}}),a(e,"assign",{enumerable:!1,value:function(n){return Object.keys(n).forEach(function(t){e.set(t,n[t])})}}),a(e,"logger",{set:function(t){t&&"function"!=typeof t&&T("Logger has to be a function"),i("logger",t)},get:function(){return o.logger||v.noop}}),a(e,"createTimeout",{set:function(t){i("createTimeout",t)},get:function(){return o.createTimeout}}),a(e,"trackingUrl",{set:function(t){i("trackingUrl",t.replace(/\/+$/,""))},get:function(){return o.trackingUrl}}),a(e,"trackingId",{set:function(t){o.trackingId&&o.trackingId!==t?T("Changing trackingId is not supported"):"string"==typeof t&&/^[a-z0-9]{12}$/i.test(t)||T("Invalid trackingId"),i("trackingId",t.toLowerCase())},get:function(){return o.trackingId}}),a(e,"rateLimit",{set:function(t){i("rateLimit",t)},get:function(){return o.rateLimit}}),a(e,"_cookieId",{enumerable:!1,set:function(t){i("cookieId",t)}}),a(e,"cookieId",{get:function(){return o.cookieId}}),a(e,"sessionTimeout",{set:function(t){t=Number(t),(!(0,v.isInt)(t)||t<300||86400<t)&&T("Invalid session timeout"),i("sessionTimeout",t)},get:function(){return o.sessionTimeout}}),a(e,"_geoCoordinates",{enumerable:!1,set:function(t){e._geoHash=(0,b.geohashEncode)(t.latitude,t.longitude,t.accuracy)}}),a(e,"geoCoordinates",{get:function(){return o.geoHash?(0,b.geohashDecode)(o.geoHash):I}}),a(e,"_geoHash",{enumerable:!1,set:function(t){i("geoHash",t,["geoCoordinates"])}}),a(e,"geoHash",{get:function(){return o.geoHash}}),a(e,"cookieDomain",{set:function(t){i("cookieDomain",t)},get:function(){return o.cookieDomain}}),a(e,"cookiePath",{set:function(t){"string"==typeof t&&"/"===t.charAt(0)||T("Invalid cookie path"),i("cookiePath",t)},get:function(){return o.cookiePath}}),a(e,"crossDomainTracking",{set:function(t){i("crossDomainTracking",!!t)},get:function(){return o.crossDomainTracking}}),a(e,"customCookieId",{set:function(t){i("customCookieId",c(t))},get:function(){return o.customCookieId}}),a(e,"customDeviceId",{set:function(t){i("customDeviceId",c(t))},get:function(){return o.customDeviceId}}),a(e,"customUserId",{set:function(t){i("customUserId",c(t))},get:function(){return o.customUserId}}),a(e,"customGeoCoordinates",{set:function(t){var n=o.customGeoCoordinates,e=0;t?(("object"!==("undefined"==typeof t?"undefined":d(t))||!(0,v.isFin)(t.latitude)||t.latitude<-90||90<t.latitude||!(0,v.isFin)(t.longitude)||t.longitude<-180||180<t.longitude||!(0,v.isFin)(t.accuracy)||t.accuracy<0)&&T("Invalid geo coords"),n&&n.latitude===t.latitude&&n.longitude===t.longitude&&n.accuracy===t.accuracy||(t={latitude:t.latitude,longitude:t.longitude,accuracy:t.accuracy},e=1)):e=(t=I)!==n,e&&i("customGeoCoordinates",t,["customGeoHash"])},get:function(){return o.customGeoCoordinates}}),a(e,"customGeoHash",{set:function(t){e.customGeoCoordinates=t?(0,b.geohashDecode)(t):I},get:function(){var t=o.customGeoCoordinates;return t?(0,b.geohashEncode)(t.latitude,t.longitude,t.accuracy):t}})}function x(t){F.call(this,t)}function A(t){var n=this;F.call(n,(0,v.assign)({customEventId:I,revenue:I,currency:I,custom:I},t||{})),a(n,"customEventId",{set:function(t){/^[a-z0-9_-]{3,15}$/i.test(t)||T("Invalid custom event id "+t),n._write("customEventId",t)},get:function(){return n._read("customEventId")}}),a(n,"revenue",{set:function(t){(t=t||0===t?t:I)&&(isFinite(t)||T("Invalid revenue "+t)),n._write("revenue",t)},get:function(){return n._read("revenue")}}),a(n,"currency",{set:function(t){(t=t||I)&&!/^[A-Z]{3}$/.test(t)&&T("Invalid ISO-4217 currency code "+t),n._write("currency",t)},get:function(){return n._read("currency")}}),a(n,"custom",{set:function(e){var o,r;(e=e||I)&&("object"!==("undefined"==typeof e?"undefined":d(e))&&(e={_:e}),o=function(t,n){return"string"==typeof t&&/^[a-z0-9_.-]+$/i.test(t)&&t.length<=n},r=[],Object.keys(e).forEach(function(t){var n=e[t];n&&(o(t,10)&&o(n,50)||T("Invalid custom field '"+t+"': "+n),r.push(t+"~"+n))}),r.length?5<r.length?T("Too many custom fields, max 5"):(r.sort(),e=r.join("!")):e=I),n._write("custom",e)},get:function(){return n._read("custom")}})}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var s=this,f=t&&t.connectionTimeout||1e3,c=t&&t.commandTimeout||1e3;function n(t,n,e,o){var r="k"+u.toString(36);function i(t){delete a[r],(e||v.noop)(t)}return setTimeout(function(){(0,v.hasOwnProp)(a,r)&&i((0,v.err)(t+" timed out","TimeoutError"))},c),a[r]={cmd:t,args:n,resolve:function(t){delete a[r],(o||v.noop)(t)},reject:i},u+=1,r}function e(t){var n=a[t],e=["_dcmnRQ"+r,t,n.cmd];n.args.forEach(function(t){e.push((0,y.encodeBase64Url)(t))}),l.postMessage(e.join("&"),d)}function o(t){var n,e;l&&l===t.source&&(h||g)&&(e=(t.origin||t.originalEvent.origin).toLowerCase(),n=t.data,d!==e||"string"!=typeof n||!/^_dcmnRS[a-z0-9]+&[a-z0-9]+&/.test(n)||(t=n.substr(7).split("&")).shift()===r&&(e=t.shift(),(0,v.hasOwnProp)(a,e)&&(n=a[e],e=t.shift(),t=0===t.length?void 0:(0,y.decodeBase64Url)(t.join("&")),"OK"===e?n.resolve(t):n.reject((0,v.err)(t)))))}i.EventDispatcher.call(s);var a={},u=0,l=b,d=b,r=b,g=0,h=0;function m(t){var n=h;(0,v.off)(window,"message",o),r=d=l=b,h=g=0,t&&s.fire(new i.ErrorEvent(E,t)),n&&s.fire(I)}function p(){g=1,r=(2147483647*Math.random()|0).toString(36)+(Date.now()/1e3|0).toString(36),(0,v.on)(window,"message",o);try{e(n("HELO",[],function(t){g&&m(t)},function(){g&&(g=0,h=1,s.fire(k))}))}catch(t){m(t)}}s.on(k,function(){Object.keys(a).forEach(e)}),s.call=function(t){t=n(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],arguments[2],arguments[3]),h&&e(t)},s.isConnected=function(){return!!h},s.disconnect=function(){return m()},s.connectWindow=function(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:v.noop;function o(){s.off(I,c),s.off(k,i),s.off(E,r)}function r(t){o(),e(t)}function i(){o(),e(null)}function c(){o()}m(),l=t,d=n,g=1,h=0,s.fire(w),s.on(E,r),s.on(k,i),s.on(I,c),setTimeout(function(){!h&&g&&m((0,v.err)("Connection timeout","TimeoutError"))},f),p()},s.connectIframe=function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:v.noop;m();var e=t.split("/").slice(0,3).join("/").toLowerCase(),o=document.createElement("iframe");function r(){s.off(I,u),s.off(k,a),s.off(E,c)}function i(){o.onload=v.noop,o.onerror=v.noop}function c(t){i(),r(),n(t)}function a(){r(),n(null)}function u(){i(),r()}l=b,d=e,g=1,h=0,s.fire(w),o.onload=function(){l=o.contentWindow,p()},o.onerror=function(t){m(t)},o.width="1",o.height="1",o.frameborder=0,o.style.visibility="hidden",o.style.position="absolute",o.style.left="-99999px",o.style.top="-99999px",o.style.width="1px",o.style.height="1px",o.src=t,(0,v.bodyAppendChild)(o),s.on(E,c),s.on(k,a),s.on(I,u),setTimeout(function(){!h&&g&&m((0,v.err)("Connection timeout","TimeoutError"))},f)}};var i=e(7),v=e(0),y=e(4),b=void 0,w="connect",k="connected",I="disconnected",E="connectionError"},function(t,n,e){"use strict";var o=r(e(6));function r(t){return t&&t.__esModule?t:{default:t}}(0,r(e(13)).default)(o.default,window)},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e(10),p=o&&o.__esModule?o:{default:o},v=e(0),y=e(3),b=Date.now();function w(n){var e=this;e.log=n.log.bind(n),e.get=n.get.bind(n),e.set=n.set.bind(n);var t=n.trackPageView.bind(n);e.trackPageView=t,e.trackPageview=t,e.trackpageView=t,e.trackpageview=t,t=n.trackCustomEvent.bind(n),e.trackCustomEvent=t,e.trackCustomevent=t,e.trackcustomEvent=t,e.trackcustomevent=t,e.ready=function(t){n.ready(function(){t(e)})}}n.default=function(s,t){var f=s.dcmnLogger,l=s.customLogger,d=new y.Timer(l),g={};try{var h=t._dcmnTrackingSdk||"_dcmn";if(l.prefix="["+h+"]","function"!=typeof t[h])return void l(y.ERROR,'Invalid or missing global dcmn function "'+h+'"');var m=t[h],n=function(t){try{var n=(t=[].slice.call(t)).shift();"function"==typeof n&&(t.unshift(n),n="ready");var e="default",o=n.split(".");1<o.length&&(e=o[0],n=o.slice(1).join(".")),"create"===n?(a=e,u=t,d.start("create"),(0,v.hasOwnProp)(g,a)?g[a].log(y.ERROR,"Tracker exists already"):((o=(0,v.assign)({},s)).customLogger=function(t){for(var n=arguments.length,e=Array(1<n?n-1:0),o=1;o<n;o++)e[o-1]=arguments[o];l.apply(void 0,[t,"["+h+"]","["+a+"]"].concat(e))},u=new w(new p.default(o,u[0],u[1])),g[a]=u,d.logger=u.log,m.t&&d.log("load",b-m.t),d.end("create"),d.start("ready"),u.ready(function(){d.end("ready")}))):(0,v.hasOwnProp)(g,e)?(r=g[e],i=n,c=t,r.ready(function(){return r[i].apply(r,function(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}(c))})):l(y.ERROR,"["+h+"]","["+e+"]",'No tracker created yet, please run "create" command first')}catch(t){f(y.ERROR,t),l(y.ERROR,t)}var r,i,c,a,u};m.loaded||(m.q=m.q||[],m.q.push=n,m.q.forEach(n),m.q.length=0,m.loaded=!0)}catch(t){f(y.ERROR,t)}}}]);